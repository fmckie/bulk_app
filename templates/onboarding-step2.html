{% extends "base.html" %}

{% block title %}Set Your Goals - Kinobody Tracker{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/onboarding.css">
{% endblock %}

{% block content %}
<div class="onboarding-container">
    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress-fill" style="width: 66%;"></div>
        </div>
        <div class="progress-steps">
            <div class="step completed">
                <div class="step-number">âœ“</div>
                <div class="step-label">Profile</div>
            </div>
            <div class="step active">
                <div class="step-number">2</div>
                <div class="step-label">Goals</div>
            </div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-label">Complete</div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="onboarding-content">
        <div class="onboarding-header">
            <h1>What's Your Primary Fitness Goal?</h1>
            <p>We'll customize your experience based on what you want to achieve</p>
        </div>

        <form id="goals-form" class="onboarding-form">
            <!-- Goal Selection Cards -->
            <div class="goal-cards" id="goal-cards">
                <!-- Goals will be populated by JavaScript -->
            </div>

            <!-- Target Metrics -->
            <div class="target-metrics" id="target-metrics" style="display: none;">
                <h3>Set Your Targets</h3>
                
                <!-- Target Weight -->
                <div class="form-group">
                    <label for="target_weight">Target Weight</label>
                    <div class="input-with-unit">
                        <input type="number" id="target_weight" name="target_weight" 
                               class="form-control" placeholder="Enter target weight" 
                               min="50" max="500" step="0.1">
                        <span class="unit-display" id="target-weight-unit">lbs</span>
                    </div>
                </div>

                <!-- Target Body Fat -->
                <div class="form-group">
                    <label for="target_body_fat">Target Body Fat % (Optional)</label>
                    <input type="number" id="target_body_fat" name="target_body_fat" 
                           class="form-control" placeholder="e.g., 12" 
                           min="5" max="40" step="0.1">
                    <small class="form-text">Leave blank if you're not sure</small>
                </div>

                <!-- Activity Level -->
                <div class="form-group">
                    <label for="activity_level">Current Activity Level</label>
                    <select id="activity_level" name="activity_level" class="form-control" required>
                        <option value="sedentary">Sedentary (little to no exercise)</option>
                        <option value="lightly_active">Lightly Active (1-3 days/week)</option>
                        <option value="moderately_active" selected>Moderately Active (3-5 days/week)</option>
                        <option value="very_active">Very Active (6-7 days/week)</option>
                        <option value="extra_active">Extra Active (physical job + exercise)</option>
                    </select>
                </div>
            </div>

            <!-- Hidden field for selected goal -->
            <input type="hidden" id="primary_goal" name="primary_goal" required>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" onclick="goBack()">Back</button>
                <button type="submit" class="btn btn-primary">Complete Setup</button>
            </div>
        </form>
    </div>
</div>

<!-- Loading Modal -->
<div id="loading-modal" class="modal">
    <div class="modal-content">
        <div class="spinner"></div>
        <p>Finalizing your setup...</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/onboarding.js"></script>
<script>
    // Initialize step 2
    document.addEventListener('DOMContentLoaded', function() {
        initializeStep2();
    });
</script>
{% endblock %}